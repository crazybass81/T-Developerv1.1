# T‑Developer Service Instance Storage Specification

A Service Instance is an executable SaaS unit generated by T‑Developer through the composition of tools, agents, and teams. This document defines the structure, storage locations, execution environments, and traceable metadata for these instances.

---

## 1. Terminology

| Term           | Definition                                                                |
| -------------- | ------------------------------------------------------------------------- |
| **Definition** | A non-executable combination of tools, agents, workflows, and config data |
| **Instance**   | A materialized SaaS unit ready for execution or actively running          |
| **Deployment** | An instance deployed to infrastructure (e.g., Lambda, EC2) for execution  |

---

## 2. Storage Structure

### 2.1 Definition Storage

| Item                 | Storage Location     |
| -------------------- | -------------------- |
| Tool/Agent Code      | S3 or AgentStore     |
| Workflow Definitions | DynamoDB, S3, or Git |
| Metadata             | DynamoDB             |

### 2.2 Instance State Storage

| Item                 | Storage Location           |
| -------------------- | -------------------------- |
| Execution Session ID | DynamoDB                   |
| Input/Output Context | DynamoDB, Redis (optional) |
| Instance Status      | DynamoDB, CloudWatch Logs  |

### 2.3 Deployment Targets

| Type            | Method / Location      |
| --------------- | ---------------------- |
| Lambda Function | Deployed to AWS Lambda |
| Docker Image    | ECR / ECS / EC2        |
| CLI Executable  | Developer local or EC2 |

---

## 3. Service Instance Metadata Structure

```json
{
  "service_id": "policy-matcher-v1",
  "status": "active",
  "created_at": "2025-07-22T04:00:00Z",
  "workflow_id": "clustered-match-flow",
  "agents": ["ScraperAgent", "ClusterAgent", "ChatAgent"],
  "deployment": {
    "type": "lambda",
    "region": "ap-northeast-2",
    "entrypoint": "handler.py::run"
  },
  "entry_input_type": "text",
  "output_type": "response",
  "last_executed_at": "2025-07-22T06:20:31Z"
}
```

---

## 4. Execution Flow Summary

```text
[Agent Definitions] + [Workflow Definition]
     ↓ Composition
[ServiceInstance Definition Created] → Stored in S3
     ↓ Deployment
[AWS Lambda or ECS] ← Entrypoint Registered
     ↓ Execution
[State, Logs] → Stored in DynamoDB + CloudWatch
```

---

## 5. Extension Considerations

* Instance versioning (based on workflow\_id + hash)
* Mapping table between Service Instance and User Session
* Execution log–driven LLM evaluation and auto-tuning
* Auto-scaling agents based on execution state

---

This structure provides the core foundation for tracking, replicating, and debugging SaaS instances generated by T‑Developer.
